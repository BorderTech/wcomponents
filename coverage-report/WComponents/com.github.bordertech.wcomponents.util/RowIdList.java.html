<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../resources/report.gif" type="image/gif"/><title>RowIdList.java</title><link rel="stylesheet" href="../../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">WComponents Coverage</a> &gt; <a href="../index.html" class="el_bundle">WComponents</a> &gt; <a href="index.source.html" class="el_package">com.github.bordertech.wcomponents.util</a> &gt; <span class="el_source">RowIdList.java</span></div><h1>RowIdList.java</h1><pre class="source lang-java linenums">package com.github.bordertech.wcomponents.util;

import com.github.bordertech.wcomponents.WDataTable;
import com.github.bordertech.wcomponents.WRepeater;
import java.io.Serializable;
import java.util.Collection;
import java.util.Iterator;
import java.util.List;
import java.util.ListIterator;
import java.util.NoSuchElementException;

/**
 * &lt;p&gt;
 * This implementation of the List interface is not intended for general use, it exists solely to provide memory
 * efficient support for {@link WRepeater#getBeanList()}.&lt;/p&gt;
 *
 * &lt;p&gt;
 * This list is immutable; any attempts to call a mutator method will result in an {@link UnsupportedOperationException}
 * being thrown.&lt;/p&gt;
 *
 * @author Yiannis Paschalidis
 * @since 1.0.0
 *
 * @deprecated No longer required as {@link WDataTable} is deprecated.
 */
@Deprecated
public final class RowIdList implements List&lt;Integer&gt;, Serializable {

	/**
	 * Message for the UnsupportedOperationExceptions thrown for mutator methods.
	 */
	private static final String IMMUTABLE_MESSAGE = &quot;DataModelRowIdList is immutable&quot;;

	/**
	 * The first row id.
	 */
	private final int startIndex;
	/**
	 * The last row id.
	 */
	private final int endIndex;

	/**
	 * Creates a RowIdList, which will &quot;contain&quot; consecutive Integer values, starting with &lt;code&gt;startIndex&lt;/code&gt; and
	 * ending with &lt;code&gt;endIndex&lt;/code&gt;.
	 *
	 * @param startIndex the first id
	 * @param endIndex the last id
	 */
<span class="fc" id="L50">	public RowIdList(final int startIndex, final int endIndex) {</span>
<span class="fc bfc" id="L51" title="All 2 branches covered.">		if (startIndex &lt; 0) {</span>
<span class="fc" id="L52">			throw new IllegalArgumentException(&quot;Start index must not be negative.&quot;);</span>
		}

<span class="fc bfc" id="L55" title="All 2 branches covered.">		if (endIndex &lt; startIndex) {</span>
<span class="fc" id="L56">			throw new IllegalArgumentException(&quot;End index must not be less than start index.&quot;);</span>
		}

<span class="fc" id="L59">		this.startIndex = startIndex;</span>
<span class="fc" id="L60">		this.endIndex = endIndex;</span>
<span class="fc" id="L61">	}</span>

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param location ignored
	 * @param value ignored
	 */
	@Override
	public void add(final int location, final Integer value) {
<span class="fc" id="L71">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param value ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public boolean add(final Integer value) {
<span class="fc" id="L82">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param collection ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public boolean addAll(final Collection collection) {
<span class="fc" id="L93">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param location ignored
	 * @param collection ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public boolean addAll(final int location, final Collection collection) {
<span class="fc" id="L105">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 */
	@Override
	public void clear() {
<span class="fc" id="L113">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean contains(final Object object) {
<span class="fc bfc" id="L121" title="All 2 branches covered.">		if (object instanceof Integer) {</span>
<span class="fc" id="L122">			int index = (Integer) object;</span>
<span class="fc bfc" id="L123" title="All 4 branches covered.">			return index &gt;= startIndex &amp;&amp; index &lt;= endIndex;</span>
		}

<span class="fc" id="L126">		return false;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean containsAll(final Collection collection) {
<span class="fc bfc" id="L134" title="All 2 branches covered.">		for (Object object : collection) {</span>
<span class="fc bfc" id="L135" title="All 2 branches covered.">			if (!contains(object)) {</span>
<span class="fc" id="L136">				return false;</span>
			}
<span class="fc" id="L138">		}</span>

<span class="fc" id="L140">		return true;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public Integer get(final int location) {
<span class="fc bfc" id="L148" title="All 4 branches covered.">		if (location &lt; 0 || location &gt;= size()) {</span>
<span class="fc" id="L149">			throw new ArrayIndexOutOfBoundsException(location);</span>
		}

<span class="fc" id="L152">		return startIndex + location;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public int indexOf(final Object object) {
<span class="fc bfc" id="L160" title="All 2 branches covered.">		if (object instanceof Integer) {</span>
<span class="fc" id="L161">			int value = (Integer) object;</span>

<span class="fc bfc" id="L163" title="All 4 branches covered.">			if (value &gt;= startIndex &amp;&amp; value &lt;= endIndex) {</span>
<span class="fc" id="L164">				return value - startIndex;</span>
			}
		}

<span class="fc" id="L168">		return -1;</span>
	}

	/**
	 * @return false - a RowIdList is never empty.
	 */
	@Override
	public boolean isEmpty() {
<span class="fc" id="L176">		return false;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public Iterator&lt;Integer&gt; iterator() {
<span class="fc" id="L184">		return new Iterator&lt;Integer&gt;() {</span>
<span class="fc" id="L185">			private int index = 0;</span>

			@Override
			public void remove() {
<span class="fc" id="L189">				throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
			}

			@Override
			public Integer next() {
<span class="fc bfc" id="L194" title="All 2 branches covered.">				if (!hasNext()) {</span>
<span class="fc" id="L195">					throw new NoSuchElementException(String.valueOf(index));</span>
				}

<span class="fc" id="L198">				return get(index++);</span>
			}

			@Override
			public boolean hasNext() {
<span class="fc bfc" id="L203" title="All 2 branches covered.">				return index &lt; size();</span>
			}
		};
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public int lastIndexOf(final Object object) {
<span class="fc" id="L213">		return indexOf(object);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public ListIterator&lt;Integer&gt; listIterator() {
<span class="fc" id="L221">		return listIterator(0);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public ListIterator&lt;Integer&gt; listIterator(final int location) {
<span class="fc" id="L229">		return new ListIterator&lt;Integer&gt;() {</span>
<span class="fc" id="L230">			private int index = location;</span>

			@Override
			public void set(final Integer object) {
<span class="fc" id="L234">				throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
			}

			@Override
			public void remove() {
<span class="fc" id="L239">				throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
			}

			@Override
			public int previousIndex() {
<span class="nc" id="L244">				return index - 1;</span>
			}

			@Override
			public Integer previous() {
<span class="fc bfc" id="L249" title="All 2 branches covered.">				if (!hasPrevious()) {</span>
<span class="fc" id="L250">					throw new NoSuchElementException(String.valueOf(index));</span>
				}

<span class="fc" id="L253">				return get(--index);</span>
			}

			@Override
			public int nextIndex() {
<span class="nc" id="L258">				return index + 1;</span>
			}

			@Override
			public Integer next() {
<span class="fc bfc" id="L263" title="All 2 branches covered.">				if (!hasNext()) {</span>
<span class="fc" id="L264">					throw new NoSuchElementException(String.valueOf(index));</span>
				}

<span class="fc" id="L267">				return get(index++);</span>
			}

			@Override
			public boolean hasPrevious() {
<span class="fc bfc" id="L272" title="All 2 branches covered.">				return index &gt; 0;</span>
			}

			@Override
			public boolean hasNext() {
<span class="fc bfc" id="L277" title="All 2 branches covered.">				return index &lt; size();</span>
			}

			@Override
			public void add(final Integer object) {
<span class="fc" id="L282">				throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
			}
		};
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param location ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public Integer remove(final int location) {
<span class="fc" id="L295">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param object ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public boolean remove(final Object object) {
<span class="fc" id="L306">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param collection ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public boolean removeAll(final Collection collection) {
<span class="fc" id="L317">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param collection ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public boolean retainAll(final Collection collection) {
<span class="fc" id="L328">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * Throws an UnsupportedOperationException, as this list is immutable.
	 *
	 * @param location ignored
	 * @param value ignored
	 * @return nothing, an exception is always thrown
	 */
	@Override
	public Integer set(final int location, final Integer value) {
<span class="fc" id="L340">		throw new UnsupportedOperationException(IMMUTABLE_MESSAGE);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public int size() {
<span class="fc" id="L348">		return endIndex - startIndex + 1;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public List&lt;Integer&gt; subList(final int start, final int end) {
<span class="pc bpc" id="L356" title="1 of 2 branches missed.">		if (start &lt; 0) {</span>
<span class="nc" id="L357">			throw new ArrayIndexOutOfBoundsException(start);</span>
<span class="pc bpc" id="L358" title="1 of 2 branches missed.">		} else if (end &gt; size()) {</span>
<span class="nc" id="L359">			throw new ArrayIndexOutOfBoundsException(end);</span>
		}

<span class="fc" id="L362">		return new RowIdList(get(start), get(end - 1));</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public Integer[] toArray() {
<span class="fc" id="L370">		final Integer[] indices = new Integer[size()];</span>

<span class="fc bfc" id="L372" title="All 2 branches covered.">		for (int i = 0; i &lt; indices.length; i++) {</span>
<span class="fc" id="L373">			indices[i] = get(i);</span>
		}

<span class="fc" id="L376">		return indices;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public Integer[] toArray(final Object[] array) {
<span class="fc" id="L384">		Integer[] indices = (Integer[]) array;</span>
<span class="fc" id="L385">		final int size = size();</span>

<span class="pc bpc" id="L387" title="1 of 2 branches missed.">		if (indices.length &gt;= size()) {</span>
<span class="fc bfc" id="L388" title="All 2 branches covered.">			for (int i = 0; i &lt; size; i++) {</span>
<span class="fc" id="L389">				indices[i] = get(i);</span>
			}

<span class="fc" id="L392">			return indices;</span>
		} else {
<span class="nc" id="L394">			return toArray();</span>
		}
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>
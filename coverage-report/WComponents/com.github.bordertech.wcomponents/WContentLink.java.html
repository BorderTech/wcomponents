<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../resources/report.gif" type="image/gif"/><title>WContentLink.java</title><link rel="stylesheet" href="../../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">WComponents Coverage</a> &gt; <a href="../index.html" class="el_bundle">WComponents</a> &gt; <a href="index.source.html" class="el_package">com.github.bordertech.wcomponents</a> &gt; <span class="el_source">WContentLink.java</span></div><h1>WContentLink.java</h1><pre class="source lang-java linenums">package com.github.bordertech.wcomponents;

import com.github.bordertech.wcomponents.WContent.DisplayMode;
import com.github.bordertech.wcomponents.WLink.WindowAttributes;
import java.io.Serializable;
import java.text.MessageFormat;

/**
 * &lt;p&gt;
 * WContentLink is a convenience class to configure a {@link WLink} to display content, such as a pdf, that is rendered
 * by {@link WContent}. By default, the content is displayed in a new window.&lt;/p&gt;
 *
 * &lt;p&gt;
 * Be warned that this link does not post the entire form, as the client will opens the content directly via a &quot;get&quot;
 * request. For situations where it is important to post the form, use a combination of {@link WButton} and
 * {@link WContent}.
 * &lt;/p&gt;
 * &lt;p&gt;
 * WContentLink provides a number of defaults to minimise configuration:-
 * &lt;/p&gt;
 * &lt;dl&gt;
 * &lt;dt&gt;Window Height&lt;/dt&gt;
 * &lt;dd&gt;600px&lt;/dd&gt;
 * &lt;dt&gt;Window Width&lt;/dt&gt;
 * &lt;dd&gt;800px&lt;/dd&gt;
 * &lt;dt&gt;Resizable&lt;/dt&gt;
 * &lt;dd&gt;true&lt;/dd&gt;
 * &lt;/dl&gt;
 * &lt;p&gt;
 * Below is an example of the code required to use WContentLink:-
 * &lt;/p&gt;
 * &lt;blockquote&gt;
 *
 * &lt;pre&gt;
 * private final WContentLink contentLink = new WContentLink(&amp;quot;link to content&amp;quot;);
 *
 * public SampleConstructor()
 * {
 *     ....
 *     add(contentLink);
 *     ....
 * }
 *
 * protected void preparePaintComponent(Request request)
 * {
 *     ....
 *     contentLink.setContentAccess(examplePdfContent);
 *     ....
 * }
 * &lt;/pre&gt;
 *
 * &lt;/blockquote&gt;
 * &lt;p&gt;
 * WContentLink provides basic configuration options, but if more advanced configuration is required, then a
 * {@link WLink} component and {@link WContent} component should be used instead. Below is an example of the code
 * required to use a WLink in combination with WContent:-
 * &lt;/p&gt;
 * &lt;blockquote&gt;
 *
 * &lt;pre&gt;
 * private final WLink link = new WLink();
 * private final WContent content = new WContent();
 *
 * public SampleConstructor()
 * {
 *     ....
 *     link.setText(&amp;quot;link to content&amp;quot;);
 *     link.setOpenNewWindow(true);
 *     link.setTargetWindowName(&amp;quot;content&amp;quot;);
 *     add(link);
 *     add(content);
 *     ....
 * }
 *
 * protected void preparePaintComponent(Request request)
 * {
 *     ....
 *     link.setUrl(content.getUrl());
 *     content.setContentAccess(examplePdfContent);
 *     ....
 * }
 * &lt;/pre&gt;
 *
 * &lt;/blockquote&gt;
 *
 * @author Jonathan Austin
 * @since 1.0.0
 */
public class WContentLink extends AbstractContainer implements Disableable {

	/**
	 * Default height for the content window.
	 */
	private static final int DEFAULT_HEIGHT = 600;

	/**
	 * Default width for the content window.
	 */
	private static final int DEFAULT_WIDTH = 800;

	/**
	 * Default name for the content window.
	 */
	private static final String DEFAULT_NAME = &quot;window&quot;;

	/**
	 * The content to be displayed in the window.
	 */
<span class="fc" id="L109">	private final WContent content = new WContent();</span>

	/**
	 * The link used to open the window containing the content.
	 */
<span class="fc" id="L114">	private final WLink link = new WLink() {</span>
		@Override
		public String getUrl() {
<span class="nc" id="L117">			return content.getUrl();</span>
		}
	};

	/**
	 * Construct the WContentLink.
	 */
<span class="fc" id="L124">	public WContentLink() {</span>
<span class="fc" id="L125">		WindowAttributes attr = new WindowAttributes();</span>
<span class="fc" id="L126">		attr.setHeight(DEFAULT_HEIGHT);</span>
<span class="fc" id="L127">		attr.setWidth(DEFAULT_WIDTH);</span>
<span class="fc" id="L128">		attr.setWindowName(DEFAULT_NAME);</span>
<span class="fc" id="L129">		attr.setResizable(true);</span>
<span class="fc" id="L130">		link.setWindowAttrs(attr);</span>
<span class="fc" id="L131">		link.setOpenNewWindow(true);</span>
<span class="fc" id="L132">		add(link);</span>
<span class="fc" id="L133">		add(content);</span>
<span class="fc" id="L134">	}</span>

	/**
	 * Creates a WContentLink with the given text.
	 *
	 * @param aText the link text.
	 */
	public WContentLink(final String aText) {
<span class="fc" id="L142">		this();</span>
<span class="fc" id="L143">		link.setText(aText);</span>
<span class="fc" id="L144">	}</span>

	/**
	 * Creates a WContentLink with the given text and access key.
	 *
	 * @param aText the link text.
	 * @param accessKey the link access key.
	 */
	public WContentLink(final String aText, final char accessKey) {
<span class="fc" id="L153">		this(aText);</span>
<span class="fc" id="L154">		link.setAccessKey(accessKey);</span>
<span class="fc" id="L155">	}</span>

	/**
	 * {@inheritDoc}
	 */
	@Override
	public boolean isHidden() {
<span class="fc" id="L162">		return link.isHidden();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public void setHidden(final boolean flag) {
<span class="fc" id="L170">		link.setHidden(flag);</span>
<span class="fc" id="L171">	}</span>

	/**
	 * Indicates whether this link is disabled in the given context.
	 *
	 * @return true if this link is disabled, otherwise false.
	 */
	@Override
	public boolean isDisabled() {
<span class="fc" id="L180">		return link.isDisabled();</span>
	}

	/**
	 * Sets whether this link is disabled.
	 *
	 * @param disabled if true, this link is disabled. If false, it is enabled.
	 */
	@Override
	public void setDisabled(final boolean disabled) {
<span class="fc" id="L190">		link.setDisabled(disabled);</span>
<span class="fc" id="L191">	}</span>

	/**
	 * @return the text to be displayed on the link.
	 */
	public String getText() {
<span class="fc" id="L197">		return link.getText();</span>
	}

	/**
	 * Sets the text displayed on the link.
	 *
	 * @param text the link text, using {@link MessageFormat} syntax.
	 * @param args optional arguments for the message format string.
	 */
	public void setText(final String text, final Serializable... args) {
<span class="fc" id="L207">		link.setText(text, args);</span>
<span class="fc" id="L208">	}</span>

	/**
	 * Indicates whether this link should render as a button.
	 *
	 * @return true if this link should render as a button, false for a hyperlink.
	 */
	public boolean isRenderAsButton() {
<span class="fc" id="L216">		return link.isRenderAsButton();</span>
	}

	/**
	 * Sets whether this link should render as a button.
	 *
	 * @param renderAsButton true if this link should render as a button, false for a hyperlink.
	 */
	public void setRenderAsButton(final boolean renderAsButton) {
<span class="fc" id="L225">		link.setRenderAsButton(renderAsButton);</span>
<span class="fc" id="L226">	}</span>

	/**
	 * Retrieves the attributes for new windows which are opened.
	 * &lt;p&gt;
	 * To change attributes for individual users, set a new {@link WindowAttributes} object for each user.
	 * &lt;/p&gt;
	 *
	 * @return the attributes for new windows.
	 */
	public WindowAttributes getWindowAttrs() {
<span class="fc" id="L237">		return link.getWindowAttrs();</span>
	}

	/**
	 * @param windowAttrs the attributes for new windows which are opened.
	 */
	public void setWindowAttrs(final WindowAttributes windowAttrs) {
<span class="nc" id="L244">		link.setWindowAttrs(windowAttrs);</span>
<span class="nc" id="L245">	}</span>

	/**
	 * @return The height of the window containing the content.
	 * @deprecated use {@link #getWindowAttrs()} to access window attributes.
	 */
	@Deprecated
	public int getHeight() {
<span class="fc" id="L253">		return getWindowAttrs().getHeight();</span>
	}

	/**
	 * @param height The height of the window containing the content.
	 * @deprecated use {@link #getWindowAttrs()} to access window attributes.
	 */
	@Deprecated
	public void setHeight(final int height) {
<span class="fc" id="L262">		getWindowAttrs().setHeight(height);</span>
<span class="fc" id="L263">	}</span>

	/**
	 * @return Returns true if the window is resizable.
	 * @deprecated use {@link #getWindowAttrs()} to access window attributes.
	 */
	@Deprecated
	public boolean isResizable() {
<span class="fc" id="L271">		return getWindowAttrs().isResizable();</span>
	}

	/**
	 * @param resizable Should the window be resizable.
	 * @deprecated use {@link #getWindowAttrs()} to access window attributes.
	 */
	@Deprecated
	public void setResizable(final boolean resizable) {
<span class="fc" id="L280">		getWindowAttrs().setResizable(resizable);</span>
<span class="fc" id="L281">	}</span>

	/**
	 * @return The width of the window containing the content.
	 * @deprecated use {@link #getWindowAttrs()} to access window attributes.
	 */
	@Deprecated
	public int getWidth() {
<span class="fc" id="L289">		return getWindowAttrs().getWidth();</span>
	}

	/**
	 * @param width The width of the window containing the document content.
	 * @deprecated use {@link #getWindowAttrs()} to access window attributes.
	 */
	@Deprecated
	public void setWidth(final int width) {
<span class="fc" id="L298">		getWindowAttrs().setWidth(width);</span>
<span class="fc" id="L299">	}</span>

	/**
	 * Supply this component with access to the document content to be displayed.
	 *
	 * @param contentAccess the ContentAccess which will supply the content.
	 */
	public void setContentAccess(final ContentAccess contentAccess) {
<span class="fc" id="L307">		content.setContentAccess(contentAccess);</span>
<span class="fc" id="L308">	}</span>

	/**
	 * @return the ContentAccess which will supply the content.
	 */
	public ContentAccess getContentAccess() {
<span class="fc" id="L314">		return content.getContentAccess();</span>
	}

	/**
	 * @return the cacheKey
	 */
	public String getCacheKey() {
<span class="fc" id="L321">		return content.getCacheKey();</span>
	}

	/**
	 * @param cacheKey the cacheKey to set.
	 */
	public void setCacheKey(final String cacheKey) {
<span class="fc" id="L328">		content.setCacheKey(cacheKey);</span>
<span class="fc" id="L329">	}</span>

	/**
	 * Sets the content display mode. Note that the window attributes will be ignored if the mode is changed to
	 * something other than {@link WContent.DisplayMode#OPEN_NEW_WINDOW}.
	 *
	 * @param displayMode the content display mode to set.
	 */
	public void setDisplayMode(final DisplayMode displayMode) {
<span class="nc" id="L338">		content.setDisplayMode(displayMode);</span>
<span class="nc" id="L339">		link.setOpenNewWindow(DisplayMode.OPEN_NEW_WINDOW.equals(content.getDisplayMode()));</span>
<span class="nc" id="L340">	}</span>

	/**
	 * @return a String representation of this component, for debugging purposes.
	 */
	@Override
	public String toString() {
<span class="nc" id="L347">		String text = getText();</span>
<span class="nc bnc" id="L348" title="All 2 branches missed.">		text = text == null ? &quot;null&quot; : '&quot;' + text + '&quot;';</span>
<span class="nc" id="L349">		return toString(text, -1, -1);</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>
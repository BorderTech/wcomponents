<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../resources/report.gif" type="image/gif"/><title>WHeading.java</title><link rel="stylesheet" href="../../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">WComponents Coverage</a> &gt; <a href="../index.html" class="el_bundle">WComponents</a> &gt; <a href="index.source.html" class="el_package">com.github.bordertech.wcomponents</a> &gt; <span class="el_source">WHeading.java</span></div><h1>WHeading.java</h1><pre class="source lang-java linenums">package com.github.bordertech.wcomponents;

import java.util.List;

/**
 * This component is used to render the different types of headings within an application.
 *
 * @author Adam Millard
 * @author Yiannis Paschalidis
 */
public class WHeading extends WText implements Container, AjaxTarget, Marginable {

	/**
	 * TITLE Heading - Level 1.
	 *
	 * @deprecated Use {@link HeadingLevel} instead
	 */
	@Deprecated
	public static final int TITLE = 1;
	/**
	 * MAJOR Heading - Level 2.
	 *
	 * @deprecated Use {@link HeadingLevel} instead
	 */
	@Deprecated
	public static final int MAJOR = 2;
	/**
	 * SECTION Heading - Level 3.
	 *
	 * @deprecated Use {@link HeadingLevel} instead
	 */
	@Deprecated
	public static final int SECTION = 3;
	/**
	 * MINOR Heading - Level 4.
	 *
	 * @deprecated Use {@link HeadingLevel} instead
	 */
	@Deprecated
	public static final int MINOR = 4;
	/**
	 * SUB Heading - Level 5.
	 *
	 * @deprecated Use {@link HeadingLevel} instead
	 */
	@Deprecated
	public static final int SUB_HEADING = 5;
	/**
	 * SUB_SUB Heading - Level 6.
	 *
	 * @deprecated Use {@link HeadingLevel} instead
	 */
	@Deprecated
	public static final int SUB_SUB_HEADING = 6;

	/**
	 * The label for the heading.
	 */
	private final WDecoratedLabel label;

	/**
	 * Creates a WHeading.
	 *
	 * @param type the heading type, one of: {@link #TITLE}, {@link #MAJOR}, {@link #SECTION}, {@link #MINOR},
	 *            {@link #SUB_HEADING}, {@link #SUB_SUB_HEADING}
	 * @param text the heading text
	 * @deprecated Use {@link #WHeading(HeadingLevel, String)} instead.
	 */
	@Deprecated
	public WHeading(final int type, final String text) {
<span class="fc" id="L71">		super(text);</span>
<span class="fc" id="L72">		this.label = null;</span>
<span class="fc" id="L73">		setHeadingLevel(convertHeadingType(type));</span>
<span class="fc" id="L74">	}</span>

	/**
	 * Creates a WHeading.
	 *
	 * @param type the heading type, one of: {@link #TITLE}, {@link #MAJOR}, {@link #SECTION}, {@link #MINOR},
	 *            {@link #SUB_HEADING}, {@link #SUB_SUB_HEADING}
	 * @param label the heading
	 * @deprecated Use {@link #WHeading(HeadingLevel, WDecoratedLabel)} instead.
	 */
	@Deprecated
<span class="fc" id="L85">	public WHeading(final int type, final WDecoratedLabel label) {</span>
<span class="fc" id="L86">		this.label = label;</span>
<span class="fc" id="L87">		add(label);</span>
<span class="fc" id="L88">		setupLabel();</span>
<span class="fc" id="L89">		setHeadingLevel(convertHeadingType(type));</span>
<span class="fc" id="L90">	}</span>

	/**
	 * Creates a WHeading.
	 *
	 * @param headingLevel the heading level
	 * @param text the heading text
	 */
	public WHeading(final HeadingLevel headingLevel, final String text) {
<span class="fc" id="L99">		super(text);</span>
<span class="fc" id="L100">		this.label = null;</span>
<span class="fc" id="L101">		setHeadingLevel(headingLevel);</span>
<span class="fc" id="L102">	}</span>

	/**
	 * Creates a WHeading.
	 *
	 * @param headingLevel the heading level
	 * @param label the heading
	 */
<span class="fc" id="L110">	public WHeading(final HeadingLevel headingLevel, final WDecoratedLabel label) {</span>
<span class="fc" id="L111">		this.label = label;</span>
<span class="fc" id="L112">		add(label);</span>
<span class="fc" id="L113">		setupLabel();</span>
<span class="fc" id="L114">		setHeadingLevel(headingLevel);</span>
<span class="fc" id="L115">	}</span>

	/**
	 * @param type the heading level type
	 * @return the heading level
	 */
	private HeadingLevel convertHeadingType(final int type) {
		// Get heading level
<span class="fc bfc" id="L123" title="All 2 branches covered.">		for (HeadingLevel lvl : HeadingLevel.values()) {</span>
<span class="fc bfc" id="L124" title="All 2 branches covered.">			if (lvl.getLevel() == type) {</span>
<span class="fc" id="L125">				return lvl;</span>
			}
		}
<span class="fc" id="L128">		throw new IllegalArgumentException(&quot;Unknown heading type: &quot; + type);</span>
	}

	/**
	 * Setup the label.
	 */
	private void setupLabel() {
		// TODO: WHeading should no longer extend WText.
		// To retain compatibility with the WText API, create a WText for this component,
		// which gets added to the label body.
<span class="fc" id="L138">		WText textBody = new WText() {</span>
			@Override
			public boolean isEncodeText() {
<span class="fc" id="L141">				return WHeading.this.isEncodeText();</span>
			}

			@Override
			public String getText() {
<span class="fc" id="L146">				return WHeading.this.getText();</span>
			}
		};

<span class="pc bpc" id="L150" title="1 of 2 branches missed.">		if (label.getBody() == null) {</span>
<span class="nc" id="L151">			label.setBody(textBody);</span>
		} else {
<span class="fc" id="L153">			WComponent oldBody = label.getBody();</span>

<span class="fc" id="L155">			WContainer newBody = new WContainer();</span>
<span class="fc" id="L156">			label.setBody(newBody);</span>

<span class="fc" id="L158">			newBody.add(textBody);</span>
<span class="fc" id="L159">			newBody.add(oldBody);</span>
		}
<span class="fc" id="L161">	}</span>

	/**
	 * @return the heading type.
	 * @deprecated use {@link #getHeadingLevel()} instead.
	 */
	@Deprecated
	public int getType() {
<span class="fc" id="L169">		return getHeadingLevel().getLevel();</span>
	}

	/**
	 * @return the heading level
	 */
	public HeadingLevel getHeadingLevel() {
<span class="fc" id="L176">		return getComponentModel().headingLevel;</span>
	}

	/**
	 * @param headingLevel the heading level
	 */
	public void setHeadingLevel(final HeadingLevel headingLevel) {
<span class="pc bpc" id="L183" title="1 of 2 branches missed.">		if (headingLevel == null) {</span>
<span class="nc" id="L184">			throw new IllegalArgumentException(&quot;Cannot set a null heading level.&quot;);</span>
		}
<span class="fc" id="L186">		getOrCreateComponentModel().headingLevel = headingLevel;</span>
<span class="fc" id="L187">	}</span>

	/**
	 * @return the decorated label which displays the heading's text/icon etc.
	 */
	public WDecoratedLabel getDecoratedLabel() {
<span class="fc" id="L193">		return label;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public void setMargin(final Margin margin) {
<span class="fc" id="L201">		getOrCreateComponentModel().margin = margin;</span>
<span class="fc" id="L202">	}</span>

	/**
	 * {@inheritDoc}
	 */
	@Override
	public Margin getMargin() {
<span class="fc" id="L209">		return getComponentModel().margin;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// to make public
	public int getChildCount() {
<span class="fc" id="L218">		return super.getChildCount();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// to make public
	public WComponent getChildAt(final int index) {
<span class="nc" id="L227">		return super.getChildAt(index);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// to make public
	public int getIndexOfChild(final WComponent childComponent) {
<span class="fc" id="L236">		return super.getIndexOfChild(childComponent);</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public List&lt;WComponent&gt; getChildren() {
<span class="nc" id="L244">		return super.getChildren();</span>
	}

	/**
	 * @return a String representation of this component, for debugging purposes.
	 */
	@Override
	public String toString() {
<span class="nc" id="L252">		String text = getText();</span>
<span class="nc bnc" id="L253" title="All 2 branches missed.">		text = text == null ? &quot;null&quot; : ('&quot;' + text + '&quot;');</span>
<span class="nc" id="L254">		return toString(text, -1, -1);</span>
	}

	/**
	 * Creates a new Component model.
	 *
	 * @return a new HeadingModel.
	 */
	@Override
	// For type safety only
	protected HeadingModel newComponentModel() {
<span class="fc" id="L265">		return new HeadingModel();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// For type safety only
	protected HeadingModel getComponentModel() {
<span class="fc" id="L274">		return (HeadingModel) super.getComponentModel();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// For type safety only
	protected HeadingModel getOrCreateComponentModel() {
<span class="fc" id="L283">		return (HeadingModel) super.getOrCreateComponentModel();</span>
	}

	/**
	 * Holds the extrinsic state information of the component.
	 */
<span class="fc" id="L289">	public static class HeadingModel extends BeanAndProviderBoundComponentModel {</span>

		/**
		 * The margins to be used on the heading.
		 */
		private Margin margin;

		/**
		 * The heading level.
		 */
		private HeadingLevel headingLevel;
	}

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>
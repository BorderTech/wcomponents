<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../../resources/report.css" type="text/css"/><link rel="shortcut icon" href="../../resources/report.gif" type="image/gif"/><title>WFigure.java</title><link rel="stylesheet" href="../../resources/prettify.css" type="text/css"/><script type="text/javascript" src="../../resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../../sessions.html" class="el_session">Sessions</a></span><a href="../../index.html" class="el_report">WComponents Coverage</a> &gt; <a href="../index.html" class="el_bundle">WComponents</a> &gt; <a href="index.source.html" class="el_package">com.github.bordertech.wcomponents</a> &gt; <span class="el_source">WFigure.java</span></div><h1>WFigure.java</h1><pre class="source lang-java linenums">package com.github.bordertech.wcomponents;

/**
 * &lt;p&gt;
 * WFigure represents a container that is used to associate a large graphical element with its text description. For
 * example, a graph and its description.
 * &lt;p&gt;
 * Various {@link FigureMode modes of operation} are supported, which allow developers to tune performance by only
 * loading content when it is needed.
 * &lt;/p&gt;
 *
 * @author Jonathan Austin
 * @since 1.0.0
 */
public class WFigure extends AbstractNamingContextContainer implements AjaxTarget, SubordinateTarget,
		Marginable {

	/**
	 * The available types of AJAX mode.
	 */
<span class="pc" id="L21">	public enum FigureMode {</span>
		/**
		 * A lazy figure will load its content via AJAX when it is made visible.
		 */
<span class="fc" id="L25">		LAZY,</span>
		/**
		 * An eager figure will load its content via AJAX immediately after the page is loaded.
		 */
<span class="fc" id="L29">		EAGER</span>
	};

	/**
	 * The label for the figure.
	 */
	private final WDecoratedLabel label;

	/**
	 * The content for the figure.
	 */
	private final WComponent content;

	/**
	 * Creates a WFigure with the given content and heading.
	 *
	 * @param content the content for the figure
	 * @param heading the figure's heading.
	 */
	public WFigure(final WComponent content, final String heading) {
<span class="fc" id="L49">		this(content, new WDecoratedLabel(heading));</span>
<span class="fc" id="L50">	}</span>

	/**
	 * Creates a WFigure with the given content and heading.
	 *
	 * @param content the content for the figure.
	 * @param label the figure's heading.
	 */
<span class="fc" id="L58">	public WFigure(final WComponent content, final WDecoratedLabel label) {</span>
<span class="fc bfc" id="L59" title="All 2 branches covered.">		if (content == null) {</span>
<span class="fc" id="L60">			throw new IllegalArgumentException(&quot;The content of a WFigure cannot be null&quot;);</span>
		}

<span class="fc bfc" id="L63" title="All 2 branches covered.">		if (label == null) {</span>
<span class="fc" id="L64">			throw new IllegalArgumentException(&quot;The label of a WFigure cannot be null&quot;);</span>
		}

<span class="fc" id="L67">		this.content = content;</span>
<span class="fc" id="L68">		this.label = label;</span>
<span class="fc" id="L69">		add(label);</span>
<span class="fc" id="L70">		add(content);</span>
<span class="fc" id="L71">	}</span>

	/**
	 * @return this WFigure's mode of operation
	 */
	public FigureMode getMode() {
<span class="fc" id="L77">		return getComponentModel().mode;</span>
	}

	/**
	 * Sets this WFigure's mode of operation.
	 *
	 * @param mode the mode of operation.
	 */
	public void setMode(final FigureMode mode) {
<span class="fc" id="L86">		getOrCreateComponentModel().mode = mode;</span>
<span class="fc" id="L87">	}</span>

	/**
	 * @return the content of this figure
	 */
	public WComponent getContent() {
<span class="fc" id="L93">		return content;</span>
	}

	/**
	 * @return the decorated label that is used to render the figure heading.
	 */
	public WDecoratedLabel getDecoratedLabel() {
<span class="fc" id="L100">		return label;</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	public void setMargin(final Margin margin) {
<span class="fc" id="L108">		getOrCreateComponentModel().margin = margin;</span>
<span class="fc" id="L109">	}</span>

	/**
	 * {@inheritDoc}
	 */
	@Override
	public Margin getMargin() {
<span class="fc" id="L116">		return getComponentModel().margin;</span>
	}

	/**
	 * Override preparePaintComponent in order to toggle the visibility of the content, or to register the appropriate
	 * ajax operation.
	 *
	 * @param request the request being responded to
	 */
	@Override
	protected void preparePaintComponent(final Request request) {
<span class="fc" id="L127">		super.preparePaintComponent(request);</span>

<span class="fc" id="L129">		UIContext uic = UIContextHolder.getCurrent();</span>

		// Register figure for AJAX
<span class="pc bpc" id="L132" title="1 of 4 branches missed.">		if (uic.getUI() != null &amp;&amp; getMode() != null) {</span>
<span class="fc" id="L133">			AjaxHelper.registerComponentTargetItself(getId(), request);</span>
		}
<span class="fc" id="L135">	}</span>

	/**
	 * @return a String representation of this component, for debugging purposes.
	 */
	@Override
	public String toString() {
<span class="nc bnc" id="L142" title="All 2 branches missed.">		String text = label == null ? null : label.getText();</span>
<span class="nc bnc" id="L143" title="All 2 branches missed.">		text = text == null ? &quot;null&quot; : ('&quot;' + text + '&quot;');</span>
<span class="nc" id="L144">		return toString(text, 1, 1);</span>
	}

	/**
	 * Creates a new component model appropriate for this component.
	 *
	 * @return a new FigureModel.
	 */
	@Override
	protected FigureModel newComponentModel() {
<span class="fc" id="L154">		return new FigureModel();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// For type safety only
	protected FigureModel getComponentModel() {
<span class="fc" id="L163">		return (FigureModel) super.getComponentModel();</span>
	}

	/**
	 * {@inheritDoc}
	 */
	@Override
	// For type safety only
	protected FigureModel getOrCreateComponentModel() {
<span class="fc" id="L172">		return (FigureModel) super.getOrCreateComponentModel();</span>
	}

	/**
	 * Holds the extrinsic state information of a WFigure.
	 */
<span class="fc" id="L178">	public static class FigureModel extends ComponentModel {</span>

		/**
		 * Indicates how the WFigure should operate.
		 */
		private FigureMode mode;

		/**
		 * The margins to be used on the WFigure.
		 */
		private Margin margin;
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.5.201505241946</span></div></body></html>